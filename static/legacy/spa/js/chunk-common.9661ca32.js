(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[1],{"0999":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("q-list",{staticClass:"list-complete-container"},[n("transition-group",{attrs:{name:"list-complete",tag:"p"}},[t.category_id?n("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:t.parentCategory.id,staticClass:"list-complete-item",attrs:{clickable:"",active:!0,"active-class":"bg-primary text-white"},on:{click:t.openParent}},[n("q-item-section",{attrs:{avatar:""}},[n("q-icon",{attrs:{color:"white",name:"arrow_upward"}})],1),n("q-item-section",[t._v(t._s(t.activeCategory.title))])],1):t._e(),t._l(t.activeCategory.children,(function(e){return n("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:e.id,staticClass:"list-complete-item",attrs:{clickable:""},on:{click:function(n){t.category_id=e.id}}},[n("q-item-section",{attrs:{avatar:""}},[n("q-icon",{attrs:{color:"accent",name:"folder"}})],1),n("q-item-section",[t._v(t._s(e.title))])],1)})),t._l(t.activeCategory.posts,(function(e){return n("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:e.id,staticClass:"list-complete-item",attrs:{clickable:"",active:e.id===t.value,"active-class":"bg-accent text-white"},on:{click:function(n){return t.$emit("input",e.id)}}},[n("q-item-section",{attrs:{avatar:""}},[n("q-icon",{attrs:{color:e.id===t.value?"white":"accent",name:"book"}})],1),n("q-item-section",[t._v(t._s(e.title))])],1)})),t.activeCategory.posts.length+t.activeCategory.children.length?t._e():n("q-item",{key:"none",staticClass:"list-complete-item"},[n("q-item-label",[t._v("Категория пуста")])],1)],2)],1)],1)},a=[],r=(n("7514"),{name:"CategoriesMenu",props:["value","categories"],data:function(){return{category_id:0}},methods:{openParent:function(){this.category_id=this.parentCategory.id},openSelectedCategory:function(){if(this.value){var t=e(this.categories,this.value);t&&(this.category_id=t.id)}function e(t,n){for(var i in t){if(t[i].posts.find((function(t){return t.id===n})))return t[i];var a=e(t[i].children,n);if(a)return a}return null}}},computed:{activeCategory:function(){function t(t){return!!t.children.length||!!t.posts.length}function e(t,n){for(var i in t){if(t[i].id===n)return t[i];var a=e(t[i].children,n);if(a)return a}return null}var n=e(this.categories,this.category_id);return n||(n={id:0,title:"Корень",children:this.categories,posts:[]}),n.children=n.children.filter(t),n},parentCategory:function(){function t(e,n){for(var i in e){if(e[i].children.find((function(t){return t.id===n})))return e[i];var a=t(e[i].children,n);if(a)return a}return null}var e=t(this.categories,this.category_id);return e||{id:0,title:"Корень",children:this.categories,posts:[]}}},mounted:function(){this.openSelectedCategory()},watch:{value:function(){this.openSelectedCategory()}}}),s=r,o=(n("fab6"),n("2877")),c=n("1c1c"),u=n("66e5"),l=n("4074"),d=n("0016"),f=n("0170"),m=n("714f"),p=n("eebe"),v=n.n(p),h=Object(o["a"])(s,i,a,!1,null,null,null);e["a"]=h.exports;v()(h,"components",{QList:c["a"],QItem:u["a"],QItemSection:l["a"],QIcon:d["a"],QItemLabel:f["a"]}),v()(h,"directives",{Ripple:m["a"]})},1711:function(t,e,n){"use strict";var i=n("3d25"),a=n.n(i);a.a},"22ad":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("q-item",[n("q-item-section",[n("q-item-label",[n("q-checkbox",{attrs:{disable:""},model:{value:t.task.done,callback:function(e){t.$set(t.task,"done",e)},expression:"task.done"}}),t._v("\n                "+t._s(t.task.name)+"\n            ")],1),n("q-item-label",[n("q-chip",{attrs:{icon:"schedule"}},[t._v("до "+t._s(t.date.formatDate(t.task.deadline,"DD.MM.YYYY")))]),t.timeDiffDays>0?n("q-chip",{attrs:{icon:"schedule"}},[t._v("Осталость "+t._s(t.timeDiffDays)+" дней")]):t._e(),t.task.subject?n("q-chip",{staticStyle:{"overflow-x":"auto","overflow-y":"hidden"},attrs:{icon:"pets"}},[t._v("\n                    "+t._s(t.task.subject)+"\n                ")]):t._e()],1),t.task.description?n("q-item-label",{attrs:{caption:""}},[n("VueMarkdown",{staticStyle:{"overflow-x":"auto","overflow-y":"hidden"},attrs:{source:t.task.description}})],1):t._e()],1)],1),n("q-separator")],1)},a=[],r=(n("7f7f"),n("28a5"),n("967e")),s=n.n(r),o=(n("96cf"),n("fa84")),c=n.n(o),u=n("bd4c"),l=n("9ce6"),d=n.n(l),f={name:"Task",props:["task","time"],data:function(){return{expanded:!1}},methods:{removeEvent:function(){var t=this;return c()(s.a.mark((function e(){return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$q.dialog({title:"Внимание!",message:"Вы действительно хотите удалить это мероприятие?",cancel:!0,persistent:!0}).onOk(c()(s.a.mark((function e(){return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$axios("/group/events/".concat(t.event.id,"/destroy")).catch((function(){t.$q.notify("Произошла ошибка!"),t.$emit("update")}));case 2:t.$q.notify("Вы удалили мероприятие!"),t.$emit("update");case 4:case"end":return e.stop()}}),e)}))));case 1:case"end":return e.stop()}}),e)})))()},sortStudentsFunc:function(t,e){return t.user.name.split(" ").reverse().join(" ")>e.user.name.split(" ").reverse().join(" ")?1:-1},editEvent:function(){this.$emit("edit",this.event)}},computed:{timeDiff:function(){return new Date(this.time)-new Date(this.task.deadline)},timeDiffDays:function(){return parseInt(-this.timeDiff/864e5)},isVisited:function(){},canVisit:function(){},isStarted:function(){},isActive:function(){},canShowTimer:function(){},date:function(){return u["b"]},isLeader:function(){return this.$store.getters["user/isLeader"]}},components:{VueMarkdown:d.a}},m=f,p=n("2877"),v=n("66e5"),h=n("4074"),b=n("0170"),q=n("8f8e"),_=n("b047"),k=n("eb85"),x=n("eebe"),g=n.n(x),y=Object(p["a"])(m,i,a,!1,null,"1bf8fbfc",null);e["a"]=y.exports;g()(y,"components",{QItem:v["a"],QItemSection:h["a"],QItemLabel:b["a"],QCheckbox:q["a"],QChip:_["a"],QSeparator:k["a"]})},2756:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-footer",{staticClass:"bg-grey-8 text-white",attrs:{bordered:""}},[n("q-toolbar",[n("q-toolbar-title",[t._v("\n            Created by cool guys from IU7.\n        ")]),t._v("\n        Версия α2603202001000\n    ")],1)],1)},a=[],r={name:"Footer"},s=r,o=n("2877"),c=n("7ff0"),u=n("65c6"),l=n("6ac5"),d=n("eebe"),f=n.n(d),m=Object(o["a"])(s,i,a,!1,null,"5ec04176",null);e["a"]=m.exports;f()(m,"components",{QFooter:c["a"],QToolbar:u["a"],QToolbarTitle:l["a"]})},"3c15":function(t,e,n){"use strict";var i=n("c3b0"),a=n.n(i);a.a},"3c89":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-card",{staticClass:"q-card"},[n("q-card-section",[n("div",{staticClass:"text-h6"},[t._v("Редактировать мероприятие")])]),n("q-card-section",{staticClass:"q-pt-none"},[n("q-input",{attrs:{label:"Преподователь"},model:{value:t.form.speaker,callback:function(e){t.$set(t.form,"speaker",e)},expression:"form.speaker"}}),n("q-select",{attrs:{options:t.typeOptions,label:"Тип мероприятия"},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}}),n("q-input",{attrs:{mask:"##.##.#### ##:##"},scopedSlots:t._u([{key:"prepend",fn:function(){return[n("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[n("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[n("q-date",{attrs:{mask:"DD.MM.YYYY HH:mm"},model:{value:t.form.date,callback:function(e){t.$set(t.form,"date",e)},expression:"form.date"}})],1)],1)]},proxy:!0},{key:"append",fn:function(){return[n("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[n("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[n("q-time",{attrs:{mask:"DD.MM.YYYY HH:mm",format24h:""},model:{value:t.form.date,callback:function(e){t.$set(t.form,"date",e)},expression:"form.date"}})],1)],1)]},proxy:!0}]),model:{value:t.form.date,callback:function(e){t.$set(t.form,"date",e)},expression:"form.date"}}),n("q-input",{attrs:{label:"Название"},model:{value:t.form.subject,callback:function(e){t.$set(t.form,"subject",e)},expression:"form.subject"}}),n("q-input",{attrs:{label:"Тема"},model:{value:t.form.theme,callback:function(e){t.$set(t.form,"theme",e)},expression:"form.theme"}}),n("q-input",{attrs:{label:"Место"},model:{value:t.form.place,callback:function(e){t.$set(t.form,"place",e)},expression:"form.place"}}),n("q-input",{attrs:{type:"textarea",label:"Краткое описание или комментирий"},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}}),n("q-btn",{attrs:{color:"primary"},on:{click:t.create}},[t._v("Добавить мероприятие")])],1)],1)},a=[],r=n("967e"),s=n.n(r),o=(n("96cf"),n("fa84")),c=n.n(o),u=n("bd4c"),l=(n("c2a3"),{name:"AddEvent",computed:{typeOptions:function(){return["Семинар","Лабораторная работа","Лекция","Консультация","Экзамен"]}},data:function(){return{form:{speaker:"",date:u["b"].formatDate(u["b"].addToDate(u["b"].startOfDate(new Date,"day"),{days:2}),"DD.MM.YYYY HH:mm"),subject:"",theme:"",description:""}}},methods:{create:function(){var t=this;return c()(s.a.mark((function e(){return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.post("/event",{speaker:t.form.speaker||"",date:u["b"].extractDate(t.form.date,"DD.MM.YYYY HH:mm").toISOString()||"",subject:t.form.subject||"",theme:t.form.theme||"",type:t.form.type||"",description:t.form.description||""}).catch((function(){t.$q.notify("Произошла ошибка! Проверить правильность заполнения полей.")}));case 2:e.sent,t.$emit("created");case 4:case"end":return e.stop()}}),e)})))()}}}),d=l,f=n("2877"),m=n("f09f"),p=n("a370"),v=n("27f9"),h=n("ddd8"),b=n("0016"),q=n("7cbe"),_=n("52ee"),k=n("ca78"),x=n("8f8e"),g=n("9c40"),y=n("eebe"),w=n.n(y),Q=Object(f["a"])(d,i,a,!1,null,"40eabc28",null);e["a"]=Q.exports;w()(Q,"components",{QCard:m["a"],QCardSection:p["a"],QInput:v["a"],QSelect:h["a"],QIcon:b["a"],QPopupProxy:q["a"],QDate:_["a"],QTime:k["a"],QCheckbox:x["a"],QBtn:g["a"]})},"3d25":function(t,e,n){},5855:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.question?n("div",{staticClass:"q-mb-md"},[n("div",{staticClass:"text-h6"},[t._v("\n        "+t._s(t.question.title)+"\n        "),t.question.required?n("span",{staticClass:"text-bold",staticStyle:{color:"#f00"}},[t._v("*")]):t._e()]),"choose"===t.question.type?n("div",[n("q-select",{attrs:{filled:"",label:"Выберите вариант ответа",options:t.question.variants,rules:[t.requiredRule]},model:{value:t.answer_model,callback:function(e){t.answer_model=e},expression:"answer_model"}})],1):"text"===t.question.type?n("div",[n("q-input",{attrs:{rules:[t.requiredRule],autogrow:"",filled:"",label:"Дайте развернутый ответ"},model:{value:t.answer_model,callback:function(e){t.answer_model=e},expression:"answer_model"}})],1):t._e()]):n("div",[n("q-card-section",[n("q-skeleton",{attrs:{type:"rect"}})],1)],1)},a=[],r={name:"Question",props:["question","answer"],data:function(){return{answer_model:""}},watch:{answer_model:function(){this.$emit("update:answer",this.answer_model)}},computed:{requiredRule:function(){var t=this;return function(e){return!t.question.required||!!e||"Пожалуйста, заполните поле"}},isRequiredMark:function(){return this.question.required?" *":""}}},s=r,o=n("2877"),c=n("ddd8"),u=n("27f9"),l=n("a370"),d=n("293e"),f=n("eebe"),m=n.n(f),p=Object(o["a"])(s,i,a,!1,null,"be9c5f54",null);e["a"]=p.exports;m()(p,"components",{QSelect:c["a"],QInput:u["a"],QCardSection:l["a"],QSkeleton:d["a"]})},aaa5:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-card",{staticClass:"q-card"},[n("q-card-section",[n("div",{staticClass:"text-h6"},[t._v("Редактировать мероприятие")])]),n("q-card-section",{staticClass:"q-pt-none"},[n("q-input",{attrs:{label:"Преподаватель"},model:{value:t.form.speaker,callback:function(e){t.$set(t.form,"speaker",e)},expression:"form.speaker"}}),n("q-select",{attrs:{options:t.typeOptions,label:"Тип мероприятия"},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}}),n("q-input",{attrs:{mask:"##.##.#### ##:##"},scopedSlots:t._u([{key:"prepend",fn:function(){return[n("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[n("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[n("q-date",{attrs:{mask:"DD.MM.YYYY HH:mm"},model:{value:t.form.date,callback:function(e){t.$set(t.form,"date",e)},expression:"form.date"}})],1)],1)]},proxy:!0},{key:"append",fn:function(){return[n("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[n("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[n("q-time",{attrs:{mask:"DD.MM.YYYY HH:mm",format24h:""},model:{value:t.form.date,callback:function(e){t.$set(t.form,"date",e)},expression:"form.date"}})],1)],1)]},proxy:!0}]),model:{value:t.form.date,callback:function(e){t.$set(t.form,"date",e)},expression:"form.date"}}),n("q-input",{attrs:{label:"Название"},model:{value:t.form.subject,callback:function(e){t.$set(t.form,"subject",e)},expression:"form.subject"}}),n("q-input",{attrs:{label:"Тема"},model:{value:t.form.theme,callback:function(e){t.$set(t.form,"theme",e)},expression:"form.theme"}}),n("q-input",{attrs:{label:"Место"},model:{value:t.form.place,callback:function(e){t.$set(t.form,"place",e)},expression:"form.place"}}),n("q-input",{attrs:{type:"textarea",label:"Краткое описание или комментирий"},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}}),n("q-btn",{attrs:{color:"primary"},on:{click:t.update}},[t._v("Редактировать мероприятие")]),n("q-btn",{attrs:{color:"primary"},on:{click:t.editVisits}},[t._v("Редактировать посещения")])],1),n("q-dialog",{model:{value:t.editingVisits,callback:function(e){t.editingVisits=e},expression:"editingVisits"}},[n("edit-event-visits",{attrs:{event:t.event},on:{edited:t.editedVisits}})],1)],1)},a=[],r=(n("f751"),n("967e")),s=n.n(r),o=(n("96cf"),n("fa84")),c=n.n(o),u=n("bd4c"),l=n("c2a3"),d={name:"AddEvent",props:["event"],computed:{typeOptions:function(){return["Семинар","Лабораторная работа","Лекция","Консультация","Экзамен"]}},data:function(){return{form:{},editingVisits:!1}},methods:{update:function(){var t=this;return c()(s.a.mark((function e(){var n;return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=u["b"].extractDate(t.form.date,"DD.MM.YYYY HH:mm"),e.next=3,t.$axios.put("/event/".concat(t.event.id),{date:n.toISOString()||"",group:t.form.group||"",speaker:t.form.speaker||"",type:t.form.type||"",subject:t.form.subject||"",place:t.form.place||"",theme:t.form.theme||"",description:t.form.description||""}).catch((function(){t.$q.notify("Произошла ошибка! Проверить правильность заполнения полей.")}));case 3:e.sent,t.$emit("edited");case 5:case"end":return e.stop()}}),e)})))()},editVisits:function(){var t=this;return c()(s.a.mark((function e(){return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.editingVisits=!0;case 1:case"end":return e.stop()}}),e)})))()},editedVisits:function(){this.editingVisits=!1,this.$emit("edited")}},created:function(){this.form=Object.assign({},this.event),this.form.date=u["b"].formatDate(new Date(this.form.date),"DD.MM.YYYY HH:mm")},components:{EditEventVisits:l["a"]}},f=d,m=n("2877"),p=n("f09f"),v=n("a370"),h=n("27f9"),b=n("ddd8"),q=n("0016"),_=n("7cbe"),k=n("52ee"),x=n("ca78"),g=n("8f8e"),y=n("9c40"),w=n("24e8"),Q=n("eebe"),C=n.n(Q),D=Object(m["a"])(f,i,a,!1,null,"391d2b38",null);e["a"]=D.exports;C()(D,"components",{QCard:p["a"],QCardSection:v["a"],QInput:h["a"],QSelect:b["a"],QIcon:q["a"],QPopupProxy:_["a"],QDate:k["a"],QTime:x["a"],QCheckbox:g["a"],QBtn:y["a"],QDialog:w["a"]})},b275:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-card",{staticClass:"event",staticStyle:{"border-radius":"25px"}},[n("q-card-section",[n("div",[t.showDate?n("q-chip",{attrs:{icon:"event"}},[t._v("\n                "+t._s(t.date.formatDate(t.event.date,"DD.MM.YYYY"))+"\n            ")]):t._e(),t.event.checkable?n("q-chip",{attrs:{icon:"warning",color:"negative","text-color":"white"}},[t._v(" Самостоятельная отметка")]):t._e(),n("q-chip",{class:t.isGoing?"bg-positive text-black":"",attrs:{icon:"schedule"}},[t._v("\n                "+t._s(t.date.formatDate(t.event.date,"HH:mm"))+" -\n                "+t._s(t.date.formatDate(t.date.addToDate(t.event.date,{minutes:95}),"HH:mm"))+"\n            ")]),t.event.place?n("q-chip",{attrs:{icon:"place"}},[t._v(t._s(t.event.place))]):t._e(),t.event.type?n("q-chip",{attrs:{icon:"pets"}},[t._v(t._s(t.event.type))]):t._e(),t.event.speaker?n("q-chip",{attrs:{icon:"person"}},[t._v("\n                "+t._s(t.speakerShort)+"\n                "),n("q-tooltip",{attrs:{"content-style":"font-size: 16px"}},t._l(t.event.speaker.split(" и "),(function(e){return n("div",[t._v("\n                        "+t._s(e)+"\n                    ")])})),0)],1):t._e()],1),n("div",{staticClass:"text-h5 q-mt-sm q-mb-xs"},[t._v(t._s(t.event.subject))]),t.event.theme?n("div",{staticClass:"text-h6"},[t._v(t._s(t.event.theme))]):t._e(),n("VueMarkdown",{staticClass:"text-caption",attrs:{source:t.event.description}})],1),n("q-card-actions",{class:t.isStarted?t.isVisited?"bg-positive":"bg-negative":""},[t.isStarted?n("q-icon",{staticClass:"q-ml-md",attrs:{size:"20px",name:t.isVisited?"check":"close",color:"white"}}):t._e(),t.isVisited||t.canVisit?t._e():n("q-btn",{attrs:{rounded:"",color:"primary",label:"Посетить"},on:{click:t.visit}}),t.canShowTimer?n("q-chip",{attrs:{icon:"timer",color:"positive"}},[t._v("\n            Через\n            "+t._s(-parseInt(t.timeDiff/60/60/1e3))+" ч.\n            "+t._s(-parseInt(t.timeDiff/60/1e3%60))+" м.\n            "+t._s(-parseInt(t.timeDiff/1e3%60))+" с.\n        ")]):t._e(),n("q-space"),t.isLeader?n("q-btn",{attrs:{color:"danger",round:"",flat:"",dense:"",icon:"delete"},on:{click:t.removeEvent}}):t._e(),t.isLeader?n("q-btn",{attrs:{color:"",round:"",flat:"",dense:"",icon:"edit"},on:{click:t.editEvent}}):t._e(),t.event.visits?n("q-btn",{attrs:{color:t.isStarted?"white":"black",round:"",flat:"",dense:"",icon:t.expanded?"keyboard_arrow_up":"keyboard_arrow_down"},on:{click:function(e){t.expanded=!t.expanded}}}):t._e()],1),t.event.visits?n("q-dialog",{model:{value:t.expanded,callback:function(e){t.expanded=e},expression:"expanded"}},[n("q-card",{staticClass:"dialog-card-set-width"},[n("q-card-section",[n("div",{staticClass:"text-h6"},[t._v("Посещения")])]),n("q-card-section",{staticClass:"q-pt-none"},[t.event.visits.length?n("q-list",[n("p",[t._v("Присутствовало "+t._s(t.event.visits.length)+" человек:")]),t._l(t.sortedVisits,(function(e){return n("q-item",{key:e.id},[n("q-item-section",{attrs:{avatar:"",top:""}},[n("q-avatar",{attrs:{color:"grey","text-color":"white"}},[e.user?n("q-img",{attrs:{src:e.user.avatar,"spinner-color":"white",ratio:1}}):t._e()],1)],1),n("q-item-section",[e.user?n("q-item-label",[t._v("\n                                "+t._s(e.user.contingent.surname)+" \n                                "+t._s(e.user.contingent.name)+"\n                            ")]):n("q-item-label",[t._v("\n                                Нет ФИО ("+t._s(e.id)+")\n                            ")])],1)],1)}))],2):n("q-banner",{staticClass:"bg-primary text-white",scopedSlots:t._u([{key:"avatar",fn:function(){return[n("q-icon",{attrs:{name:"insert_emoticon",color:"white"}})]},proxy:!0}],null,!1,2153972665)},[t._v("\n                    Мероприятие не имеет слушателей\n                ")])],1),n("q-card-actions",{attrs:{align:"right"}},[n("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Закрыть",color:"primary"}})],1)],1)],1):t._e()],1)},a=[],r=(n("7514"),n("28a5"),n("7f7f"),n("967e")),s=n.n(r),o=(n("96cf"),n("fa84")),c=n.n(o),u=n("bd4c"),l=n("9ce6"),d=n.n(l),f={name:"Event",props:["event","time","showDate","students"],data:function(){return{expanded:!1}},methods:{visit:function(){var t=this;return c()(s.a.mark((function e(){return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.canVisit){e.next=3;break}return t.$q.notify({message:"Вы не можете посетить данное мероприятие"}),e.abrupt("return");case 3:return e.next=5,t.$axios.post("/event/".concat(t.event.id,"/visit")).catch((function(e){throw t.$q.notify("Произошла ошибка!"),e}));case 5:e.sent,t.$q.notify("Вы успешно отметились на занятии!"),t.$emit("update");case 8:case"end":return e.stop()}}),e)})))()},removeEvent:function(){var t=this;return c()(s.a.mark((function e(){return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$q.dialog({title:"Внимание!",message:"Вы действительно хотите удалить это мероприятие?",cancel:!0,persistent:!0}).onOk(c()(s.a.mark((function e(){return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.delete("/event/".concat(t.event.id)).catch((function(){t.$q.notify("Произошла ошибка!"),t.$emit("update")}));case 2:t.$q.notify("Вы удалили мероприятие!"),t.$emit("update");case 4:case"end":return e.stop()}}),e)}))));case 1:case"end":return e.stop()}}),e)})))()},sortStudentsFunc:function(t,e){var n=function(t){return t.user?t.user.contingent.surname+t.user.contingent.name+t.user.contingent.secname:t.userId};return n(t)>n(e)?1:-1},editEvent:function(){this.$emit("edit",this.event)}},computed:{timeDiff:function(){return new Date(this.time)-new Date(this.event.date)},isVisited:function(){var t=this;return!!this.event.visits.filter((function(e){return e.userId==t.$store.state.user.data.id})).length},canVisit:function(){return this.timeDiff<-3e5||this.timeDiff>18e5},infoMessage:function(){return!this.isVisited&&this.timeDiff>18e5?"Вы отсутствовали":null},isGoing:function(){return this.timeDiff>-3e5&&this.timeDiff<57e5},isStarted:function(){var t=this.timeDiff;return t>0},isActive:function(){var t=this.timeDiff;return this.isStarted&&t<75e5},canShowTimer:function(){var t=this.timeDiff;return!this.isStarted&&t>-108e5},date:function(){return u["b"]},isLeader:function(){return this.$store.getters["user/isLeader"]},sortedVisits:function(){return this.visits.sort(this.sortStudentsFunc)},speakerShort:function(){return this.event.speaker.split(" и ").map((function(t){var e=t.split(" "),n=e[0]+" "+e.slice(1).map((function(t){return t[0]+"."})).join("");return n})).join(", ")},visits:function(){var t=this;return this.event.visits.map((function(e){return{id:e.id,user:t.students.find((function(t){return t.id==e.userId}))}}))}},components:{VueMarkdown:d.a}},m=f,p=(n("1711"),n("2877")),v=n("f09f"),h=n("a370"),b=n("b047"),q=n("05c0"),_=n("4b7e"),k=n("0016"),x=n("9c40"),g=n("2c91"),y=n("24e8"),w=n("1c1c"),Q=n("66e5"),C=n("4074"),D=n("cb32"),$=n("068f"),S=n("0170"),Y=n("54e1"),I=n("7f67"),V=n("eebe"),j=n.n(V),M=Object(p["a"])(m,i,a,!1,null,"2d7591d5",null);e["a"]=M.exports;j()(M,"components",{QCard:v["a"],QCardSection:h["a"],QChip:b["a"],QTooltip:q["a"],QCardActions:_["a"],QIcon:k["a"],QBtn:x["a"],QSpace:g["a"],QDialog:y["a"],QList:w["a"],QItem:Q["a"],QItemSection:C["a"],QAvatar:D["a"],QImg:$["a"],QItemLabel:S["a"],QBanner:Y["a"]}),j()(M,"directives",{ClosePopup:I["a"]})},c2a3:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-card",{staticClass:"q-card"},[n("q-card-section",[n("div",{staticClass:"text-h6"},[t._v("Редактировать посещения")])]),n("q-card-section",{staticClass:"q-pt-none"},[t.students.length?n("q-list",[n("q-item-label",{attrs:{header:""}},[t._v("Присутствовали")]),n("transition-group",{attrs:{name:"list"}},t._l(t.visited,(function(e){return n("q-item",{key:e.id},[n("q-item-section",{attrs:{avatar:"",top:""}},[n("q-btn",{attrs:{round:"",dense:"",flat:"",size:"md",icon:"close",color:"negative"},on:{click:function(n){return t.removeStudent(e)}}})],1),n("q-item-section",{attrs:{avatar:"",top:""}},[n("q-avatar",{attrs:{color:"grey","text-color":"white"}},[n("q-img",{attrs:{src:e.avatar,"spinner-color":"white",ratio:1}})],1)],1),n("q-item-section",[n("q-item-label",[t._v(t._s(e.contingent.surname)+"\n              "+t._s(e.contingent.name))])],1)],1)})),1),t.visited.length?t._e():n("q-banner",{staticClass:"bg-primary text-white"},[t._v("\n        Никто не присутствовал\n      ")]),n("q-separator"),n("q-item-label",{attrs:{header:""}},[t._v("Отсутствовали")]),n("transition-group",{attrs:{name:"list"}},t._l(t.unvisited,(function(e){return n("q-item",{key:e.id,staticClass:"list-item"},[n("q-item-section",{attrs:{avatar:"",top:""}},[n("q-btn",{attrs:{round:"",dense:"",flat:"",size:"md",icon:"add",color:"primary"},on:{click:function(n){return t.addStudent(e)}}})],1),n("q-item-section",{attrs:{avatar:"",top:""}},[n("q-avatar",{attrs:{color:"grey","text-color":"white"}},[n("q-img",{attrs:{src:e.avatar,"spinner-color":"white",ratio:1}})],1)],1),n("q-item-section",[n("q-item-label",[t._v(t._s(e.contingent.surname)+"\n              "+t._s(e.contingent.name))]),n("div",{staticClass:"float-right"})],1)],1)})),1),t.unvisited.length?t._e():n("q-banner",{staticClass:"bg-primary text-white"},[t._v("\n        Все присутствовали\n      ")])],1):n("q-skeleton",{attrs:{height:"900px",square:""}})],1),n("q-card-actions",[n("q-btn",{attrs:{icon:"save",label:"Применить изменения",color:"primary"},on:{click:t.update}})],1)],1)},a=[],r=n("967e"),s=n.n(r),o=(n("96cf"),n("fa84")),c=n.n(o),u=(n("7514"),n("bd4c"),{name:"EditEventVisits",props:["event"],computed:{visited:function(){var t=this;return this.students.filter((function(e){return t.visited_ids.find((function(t){return t==e.id}))}))},unvisited:function(){var t=this;return this.students.filter((function(e){return!t.visited_ids.find((function(t){return t==e.id}))}))}},data:function(){return{visited_ids:[],students:[]}},methods:{update:function(){var t=this;return c()(s.a.mark((function e(){return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.post("/event/".concat(t.event.id,"/syncVisits"),t.visited_ids);case 2:t.$emit("edited");case 3:case"end":return e.stop()}}),e)})))()},updateStudents:function(){var t=this;return c()(s.a.mark((function e(){var n;return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$axios("/group/students");case 2:n=e.sent,t.students=n.data;case 4:case"end":return e.stop()}}),e)})))()},addStudent:function(t){this.visited_ids.push(t.id)},removeStudent:function(t){this.visited_ids=this.visited_ids.filter((function(e){return t.id!=e}))}},created:function(){this.updateStudents(),this.visited_ids=this.event.visits.map((function(t){return t.userId}))}}),l=u,d=(n("3c15"),n("2877")),f=n("f09f"),m=n("a370"),p=n("1c1c"),v=n("0170"),h=n("66e5"),b=n("4074"),q=n("9c40"),_=n("cb32"),k=n("068f"),x=n("54e1"),g=n("eb85"),y=n("293e"),w=n("4b7e"),Q=n("eebe"),C=n.n(Q),D=Object(d["a"])(l,i,a,!1,null,"2269ce54",null);e["a"]=D.exports;C()(D,"components",{QCard:f["a"],QCardSection:m["a"],QList:p["a"],QItemLabel:v["a"],QItem:h["a"],QItemSection:b["a"],QBtn:q["a"],QAvatar:_["a"],QImg:k["a"],QBanner:x["a"],QSeparator:g["a"],QSkeleton:y["a"],QCardActions:w["a"]})},c3b0:function(t,e,n){},fab6:function(t,e,n){"use strict";var i=n("ff25"),a=n.n(i);a.a},ff25:function(t,e,n){}}]);