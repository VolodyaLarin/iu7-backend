(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[19],{c865:function(t,e,a){"use strict";a.r(e);var n,s,r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{staticClass:"q-pa-md"},[a("p",{staticClass:"text-h2 text-center"},[t._v("\n        "+t._s(t.pool.info.name)+"\n    ")]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 col-md-4 col-sm-6 q-pa-md"},[a("q-card",{staticClass:"full-height"},[a("q-scroll-area",{staticClass:"fit",staticStyle:{"min-height":"200px","max-height":"400px"}},[a("q-card-section",[a("div",{staticClass:"row justify-between"},[a("div",{staticClass:"text-h5 q-mb-md"},[t._v("\n                                Участники опроса:\n                            ")]),a("span",[t._v(t._s(t.pool.answers.length)+" человек")])]),t.pool.users?a("q-list",{attrs:{bordered:""}},t._l(t.pool.users,(function(e){return a("q-item",{key:e.id},[a("q-item-section",{attrs:{avatar:"",top:""}},[a("q-avatar",{attrs:{color:"grey","text-color":"white"}},[a("img",{attrs:{src:e.avatar}})])],1),a("q-item-section",[a("q-item-label",[t._v(t._s(e.name))])],1)],1)})),1):t._e()],1)],1)],1)],1),t._l(t.pool.info.questions,(function(e,n){return a("div",{key:n,staticClass:"col-12 col-md-4 col-sm-6 q-pa-md"},[a("Result",{staticClass:"full-height",attrs:{question:e,results:t.getResults(n)}})],1)}))],2),a("q-table",{attrs:{data:t.tableData,columns:t.tableColumns}})],1)},o=[],i=a("967e"),l=a.n(i),c=(a("96cf"),a("fa84")),u=a.n(c),d=(a("f751"),a("7f7f"),a("4db1")),f=a.n(d),p=(a("5855"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.question?a("q-card",[a("q-card-section",[a("p",{staticClass:"text-h5"},[t._v("\n            Вопрос: "+t._s(t.question.title)+"\n        ")]),t._v("\n        Варианты ответов:\n        "),"choose"===t.question.type?a("div",{staticClass:"row"},[a("q-list",{staticClass:"col-md-6 col-12",attrs:{bordered:""}},t._l(t.question.variants,(function(e){return a("q-item",[a("q-item-section",[t._v("\n                        "+t._s(e)+"\n                    ")]),a("q-item-section",{attrs:{side:"right"}},[t._v("\n                        "+t._s(t.results.filter((function(t){return t===e})).length)+" голосов\n                    ")])],1)})),1),a("PieChart",{staticClass:"col-md-6 col-12",staticStyle:{height:"150px"},attrs:{chartdata:t.chartData,options:t.chartOptions}})],1):"text"===t.question.type?a("div",[a("q-list",{attrs:{bordered:""}},[t._l(t.results,(function(e){return a("q-item",[t._v("\n                    "+t._s(e)+"\n                ")])})),t.results.length?t._e():a("q-item",[t._v("\n                    Нет ответов\n                ")])],2)],1):t._e()])],1):a("div",[t._v("\n    Loading...\n")])}),m=[],h=a("368d"),q={extends:h["a"],props:["chartdata","options"],mounted:function(){this.renderChart(this.chartdata,this.options)}},v=q,b=a("2877"),_=Object(b["a"])(v,n,s,!1,null,null,null),C=_.exports,g={name:"Result",components:{PieChart:C},props:["question","results"],computed:{chartOptions:function(){return{responsive:!0,maintainAspectRatio:!1,elements:{arc:{backgroundColor:function(t){var e=["#7fc908","#20457c","#9e2220","#5e3448","#fb6648","#3b3a35","#31CCEC","#cf9417"];return e[t.dataIndex%e.length]}}}}},chartData:function(){var t=this;return{labels:this.question.variants,datasets:[{data:this.question.variants.map((function(e){return t.results.filter((function(t){return t===e})).length}))}]}}}},w=g,x=a("f09f"),Q=a("a370"),y=a("1c1c"),D=a("66e5"),S=a("4074"),k=a("eebe"),I=a.n(k),O=Object(b["a"])(w,p,m,!1,null,"1d971ff0",null),R=O.exports;I()(O,"components",{QCard:x["a"],QCardSection:Q["a"],QList:y["a"],QItem:D["a"],QItemSection:S["a"]});var j=a("bd4c"),A={name:"PoolAnswer",data:function(){return{pool:{info:{},completed:!1},answers:[]}},computed:{tableColumns:function(){return this.pool.info.questions?[{name:"date",field:"date",label:"Дата",required:!0,format:function(t){return j["b"].formatDate(t,"DD.MM.YYYY hh:mm")},align:"left",sortable:!1},{name:"user",field:"user",label:"Участник",required:!0,align:"left",sortable:!1}].concat(f()(this.pool.info.questions.map((function(t,e){return{name:e,field:e,label:t.title}})))):[]},tableData:function(){return this.pool.answers.map((function(t){var e={user:t.user?t.user.name:"",id:t.id,date:t.created_at};return t.answer.map((function(t,e){var a={};return a[e]=t,a})).forEach((function(t){Object.assign(e,t)})),e}))}},methods:{update:function(){var t=this;return u()(l.a.mark((function e(){var a;return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.get("/pools/results/".concat(t.$route.params.pool));case 2:a=e.sent,t.pool=a.data.data;case 4:case"end":return e.stop()}}),e)})))()},getResults:function(t){return this.pool.answers?this.pool.answers.map((function(e){return e.answer[t]})).filter((function(t){return t})):[]}},created:function(){this.update()},components:{Result:R}},E=A,L=a("9989"),P=a("4983"),Y=a("cb32"),$=a("0170"),J=a("eaac"),M=Object(b["a"])(E,r,o,!1,null,null,null);e["default"]=M.exports;I()(M,"components",{QPage:L["a"],QCard:x["a"],QScrollArea:P["a"],QCardSection:Q["a"],QList:y["a"],QItem:D["a"],QItemSection:S["a"],QAvatar:Y["a"],QItemLabel:$["a"],QTable:J["a"]})}}]);