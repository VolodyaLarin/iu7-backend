(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[12],{a9c3:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-layout",{attrs:{view:"hhh LpR lfF"}},[t._e(),a("q-page-container",[a("transition",{attrs:{appear:"","enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut","out-in":""}},[a("router-view")],1)],1),a("q-footer",[a("q-tabs",{staticClass:"bg-primary text-white shadow-2"},[a("q-route-tab",{attrs:{ripple:"",to:"/",name:"home",icon:"home"}}),t.isGroupActive?a("q-route-tab",{attrs:{ripple:"",to:{name:"group"},name:"group",icon:"group"}}):t._e(),t.records_active?a("q-route-tab",{attrs:{ripple:"",to:{name:"group.records"},name:"records",icon:"slideshow"}}):t._e(),t.user.loaded?t.user.auth?a("q-btn-dropdown",{attrs:{"auto-close":"",stretch:"",color:"white",flat:"",ripple:""},scopedSlots:t._u([{key:"label",fn:function(){return[a("div",[a("div",{staticClass:"row justify-around items-center no-wrap"},[a("q-icon",{attrs:{name:"perm_identity"}})],1)])]},proxy:!0}])},[a("div",{staticClass:"row no-wrap q-pa-md"},[a("div",{staticClass:"column"},[a("div",{staticClass:"text-h6 q-mb-md"},[t._v("Настройки")]),a("q-toggle",{attrs:{label:"Ночной режим"},model:{value:t.darkMode,callback:function(e){t.darkMode=e},expression:"darkMode"}})],1),a("q-separator",{staticClass:"q-mx-lg",attrs:{vertical:"",inset:""}}),a("div",{staticClass:"column items-center"},[a("q-avatar",{attrs:{size:"72px"}},[a("q-img",{attrs:{src:t.user.data.avatar,"spinner-color":"white",ratio:35/45}})],1),a("div",{staticClass:"text-subtitle1 q-mt-md "},[t._v(t._s(t.user.data.contingent.name))]),t.user.data.contingent?a("div",{staticClass:"text-subtitle2 q-mb-xs"},[t._v(t._s(t.user.data.contingent.group))]):t._e(),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"full-width",attrs:{color:"primary",label:"Профиль",size:"sm",to:"/profile"}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"full-width",attrs:{color:"primary",label:"Выйти",size:"sm",to:"/logout"}})],1)],1)]):a("q-route-tab",{attrs:{to:"/login",name:"login",icon:"vpn_key",label:"Войти"}}):a("q-skeleton",{attrs:{type:"QBtn"}})],1)],1)],1)},s=[],o=a("4db1"),n=a.n(o),i=(a("7f7f"),a("967e")),c=a.n(i),u=(a("96cf"),a("fa84")),l=a.n(u),d=a("b06b"),p=a("0999"),m=a("2756"),f={data:function(){return{left:!1,darkMode:!1,categories:{selected:"",filter:"",load:!1,data:[]},group_active:!1,records_active:!1}},methods:{openURL:d["a"],updateCategories:function(){var t=this;return l()(c.a.mark((function e(){var a;return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.get("/categories");case 2:a=e.sent,t.categories.data=a.data.data,t.categories.load=!0,t.selectCurrentPost();case 6:case"end":return e.stop()}}),e)})))()},openPost:function(){this.$router.push({name:"post",params:{post:this.categories.selected}})},selectCurrentPost:function(){if("post"!==this.$route.name)return this.categories.selected=null;this.categories.selected=parseInt(this.$route.params.post)},updateGroupActive:function(){var t=this;return l()(c.a.mark((function e(){var a;return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$axios("/event/filter?q={}");case 2:a=e.sent,t.group_active=!!a.data.length,t.records_active=!1;case 5:case"end":return e.stop()}}),e)})))()}},mounted:function(){this.$store.dispatch("user/update"),this.updateGroupActive(),this.darkMode="true"===localStorage.getItem("darkMode")},computed:{TreeCategoties:function(){function t(t){return!!t.children.length||!!t.posts.length}function e(a){return{id:a.id,title:a.title,selectable:!1,children:[].concat(n()(a.children.filter(t).map(e)),n()(a.posts.map((function(t){return{id:"p"+t.id,title:t.title,selectable:!0}}))))}}return this.categories.load?this.categories.data.filter(t).map(e):{}},user:function(){return this.$store.state.user},isModerator:function(){return this.$store.getters["user/isModerator"]},isStudent:function(){return this.user.data&&this.user.data.contingent},isGroupActive:function(){return this.group_active}},watch:{darkMode:function(t){localStorage.setItem("darkMode",t),this.$q.dark.set(t)},$route:function(){this.selectCurrentPost()}},components:{CategoriesMenu:p["a"],Footer:m["a"]}},h=f,v=a("2877"),g=a("4d5a"),b=a("e359"),w=a("65c6"),q=a("429b"),_=a("7867"),C=a("2c91"),k=a("293e"),Q=a("f20b"),x=a("9564"),y=a("eb85"),M=a("cb32"),$=a("9c40"),S=a("09e3"),I=a("7ff0"),P=a("0016"),A=a("068f"),T=a("7f67"),G=a("eebe"),z=a.n(G),B=Object(v["a"])(h,r,s,!1,null,null,null);e["default"]=B.exports;z()(B,"components",{QLayout:g["a"],QHeader:b["a"],QToolbar:w["a"],QTabs:q["a"],QRouteTab:_["a"],QSpace:C["a"],QSkeleton:k["a"],QBtnDropdown:Q["a"],QToggle:x["a"],QSeparator:y["a"],QAvatar:M["a"],QBtn:$["a"],QPageContainer:S["a"],QFooter:I["a"],QIcon:P["a"],QImg:A["a"]}),z()(B,"directives",{ClosePopup:T["a"]})}}]);